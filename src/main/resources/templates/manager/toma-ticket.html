<!--<!DOCTYPE html>-->
<!--<html lang="es" xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>Tomar Ticket #<span th:text="${ticket.idTicket}"></span></title>-->
<!--    <link rel="stylesheet" href="/css/styles.css">-->
<!--</head>-->
<!--<body>-->
<!--    <main>-->
<!--        <h1>Tomar Ticket #<span th:text="${ticket.idTicket}"></span></h1>-->

<!--        <div th:if="${errorMessage}" class="alert alert-danger">-->
<!--            <p th:text="${errorMessage}"></p>-->
<!--        </div>-->

<!--        <h2>Detalles del Ticket</h2>-->
<!--        <p><strong>Título:</strong> <span th:text="${ticket.titulo}"></span></p>-->
<!--        <p><strong>Descripción:</strong> <span th:text="${ticket.descripcion}"></span></p>-->
<!--        <p><strong>Estado Actual:</strong> <span th:text="${ticket.estado != null ? ticket.estado : 'N/A'}"></span></p>-->
<!--        <p><strong>Área Asignada:</strong> <span th:text="${ticket.area != null ? ticket.area : 'Sin Asignar'}"></span></p>-->

<!--        <h3>Ingrese los detalles de su primera intervención al tomar el ticket:</h3>-->
<!--        <form th:action="@{/ticket/{idTicket}/tomar(idTicket=${ticket.idTicket})}" th:object="${control}" method="post">-->
<!--            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />-->

<!--            <div>-->
<!--                <label for="funcion">Función (Tipo de Acción):</label>-->
<!--                <input type="text" id="funcion" th:field="*{funcion}" required placeholder="Ej: Diagnóstico Inicial, Recepción de Ticket"/>-->
<!--                <span th:if="${#fields.hasErrors('funcion')}" th:errors="*{funcion}" class="text-danger"></span>-->
<!--            </div>-->
<!--            <br/>-->
<!--            <div>-->
<!--                <label for="accion">Acción Realizada (Detalles):</label>-->
<!--                <textarea id="accion" th:field="*{accion}" rows="5" required placeholder="Ej: Se reviso el ticket con un ejecutivo."></textarea>-->
<!--                <span th:if="${#fields.hasErrors('accion')}" th:errors="*{accion}" class="text-danger"></span>-->
<!--            </div>-->
<!--            <br/>-->
<!--            <button type="submit">Iniciar Gestión del Ticket</button>-->
<!--        </form>-->

<!--        <p><a th:href="@{/ticket/lista}">Volver a la lista de todos los tickets</a></p>-->
<!--    </main>-->
    
<!--</body>-->
<!--</html>-->
<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tomar Ticket #<span th:text="${ticket.idTicket}"></span></title>
    <link rel="stylesheet" href="/css/style.css"> </head>
<body>
    <header>
        <h1>Tomar Ticket #<span th:text="${ticket.idTicket}"></span></h1>
        <nav>
            <ul>
                <li><a th:href="@{/panel}">Panel de Control</a></li>
                <li><a th:href="@{/ticket/lista}">Volver a la lista de tickets</a></li>
                <li><a th:href="@{/logout}">Cerrar Sesión</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <div th:if="${errorMessage}" class="alert alert-danger">
            <p th:text="${errorMessage}"></p>
        </div>
        <div th:if="${successMessage}" class="alert alert-success">
            <p th:text="${successMessage}"></p>
        </div>

<!--        <div th:if="${#fields.hasAnyErrors()}" class="alert alert-danger">-->
<!--            <p>Por favor, corrige los siguientes errores:</p>-->
<!--            <ul>-->
<!--                <li th:each="err : ${#fields.errors()}" th:text="${err}"></li>-->
<!--            </ul>-->
<!--        </div>-->

        <h2>Detalles del Ticket</h2>
        <p><strong>Título:</strong> <span th:text="${ticket.titulo}"></span></p>
        <p><strong>Descripción:</strong> <span th:text="${ticket.descripcion}"></span></p>
        <p><strong>Estado Actual:</strong> <span th:text="${ticket.estado != null ? ticket.estado : 'N/A'}"></span></p>
        <p><strong>Área Asignada:</strong> <span th:text="${ticket.area != null ? ticket.area : 'Sin Asignar'}"></span></p>

        <h3>Ingrese los detalles de su primera intervención al tomar el ticket:</h3>
        <form th:action="@{/ticket/{idTicket}/tomar(idTicket=${ticket.idTicket})}" th:object="${control}" method="post">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
            <br/>
            <div>
                <label for="accion">Acción Realizada (Detalles):</label>
                <textarea id="accion" th:field="*{accion}" rows="5" required placeholder="Ej: Se reviso el ticket con un ejecutivo."></textarea>
                <span th:if="${#fields.hasErrors('accion')}" th:errors="*{accion}" class="text-danger"></span>
            </div>
            <br/>
            <button type="submit">Iniciar Gestión del Ticket</button>
        </form>

        <p><a th:href="@{/ticket/lista}">Volver a la lista de todos los tickets</a></p>
    </main>

    <footer>
        <p>&copy; 2025 Tu Aplicación</p>
    </footer>
</body>
</html>